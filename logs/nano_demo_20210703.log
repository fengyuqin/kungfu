[INFO 2021-07-03 17:29:43] init the backend:backend_3001 [file:launch.go line:38] 
[INFO 2021-07-03 17:29:43] init the balancer:balancer_1001 [file:launch.go line:38] 
[INFO 2021-07-03 17:31:18] login received: uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:connector.go line:27] 
[INFO 2021-07-03 17:31:18] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78] 
[INFO 2021-07-03 17:31:18] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x1429620] 0xc000492600 5s 0xc0005a02a0 server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388} uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:value.go line:476] 
[INFO 2021-07-03 17:31:18] a is:36028797018963967 [file:connector.go line:74] 
[INFO 2021-07-03 17:31:18] ChannelMsg received: uid:1001  msg_data:"hello chat" [file:connector.go line:81] 
[INFO 2021-07-03 17:31:18] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78] 
[INFO 2021-07-03 17:32:12] stop the balancer:balancer_1001 [file:launch.go line:50] 
[INFO 2021-07-03 17:32:20] init the backend:backend_3001 [file:launch.go line:38] 
[INFO 2021-07-03 17:32:20] init the balancer:balancer_1001 [file:launch.go line:38] 
[INFO 2021-07-03 17:33:03] login received: uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:connector.go line:27] 
[INFO 2021-07-03 17:33:03] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78] 
[INFO 2021-07-03 17:33:03] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x1429620] 0xc000540600 5s 0xc00052e120 server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388} uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:value.go line:476] 
[INFO 2021-07-03 17:33:03] a is:36028797018963967 [file:connector.go line:74] 
[INFO 2021-07-03 17:33:03] ChannelMsg received: uid:1001  msg_data:"hello chat" [file:connector.go line:81] 
[INFO 2021-07-03 17:33:03] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78] 
[INFO 2021-07-03 18:01:56] stop the backend:backend_3001 [file:launch.go line:50] 
[INFO 2021-07-03 18:01:56] stop the balancer:balancer_1001 [file:launch.go line:50] 
\033[1;32;42[INFO 2021-07-03 18:03:33] init the balancer:balancer_1001 [file:launch.go line:38]\033[0m
\033[1;32;42[INFO 2021-07-03 18:03:33] init the backend:backend_3001 [file:launch.go line:38]\033[0m
\033[1;32;42[INFO 2021-07-03 18:03:40] login received: uid:1001 nickname:"jason" token:"ce0da27df7150196625e48c843deb1f9" backend:{server_id:"backend_3001" server_type:"backend" server_name:"kungfu backend" server_ip:"127.0.0.1" client_port:8388} connector:{server_id:"connector_2001" server_type:"connector" server_name:"kungfu connector" server_ip:"127.0.0.1" client_port:8288} [file:connector.go line:27]\033[0m
\033[1;32;42[INFO 2021-07-03 18:03:40] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78]\033[0m
\033[1;32;42[INFO 2021-07-03 18:03:40] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x1429620] 0xc000542c00 5s 0xc000552280 server_id:"backend_3001" server_type:"backend" server_name:"kungfu backend" server_ip:"127.0.0.1" client_port:8388} uid:1001 nickname:"jason" token:"ce0da27df7150196625e48c843deb1f9" backend:{server_id:"backend_3001" server_type:"backend" server_name:"kungfu backend" server_ip:"127.0.0.1" client_port:8388} connector:{server_id:"connector_2001" server_type:"connector" server_name:"kungfu connector" server_ip:"127.0.0.1" client_port:8288} [file:value.go line:476]\033[0m
\033[1;32;42[INFO 2021-07-03 18:03:40] a is:36028797018963967 [file:connector.go line:74]\033[0m
\033[1;32;42[INFO 2021-07-03 18:03:40] ChannelMsg received: uid:1001 msg_data:"hello chat" [file:connector.go line:81]\033[0m
\033[1;32;42[INFO 2021-07-03 18:03:40] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78]\033[0m
\033[1;32;42[INFO 2021-07-03 18:05:33] stop the balancer:balancer_1001 [file:launch.go line:50]\033[0m
[INFO 2021-07-03 18:13:42] init the backend:backend_3001 [file:launch.go line:38]
[INFO 2021-07-03 18:13:42] init the balancer:balancer_1001 [file:launch.go line:38]
[INFO 2021-07-03 18:13:51] login received: uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:connector.go line:27]
[INFO 2021-07-03 18:13:51] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78]
[INFO 2021-07-03 18:13:51] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x1429620] 0xc000542600 5s 0xc0000a8420 server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388} uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:value.go line:476]
[INFO 2021-07-03 18:13:51] a is:36028797018963967 [file:connector.go line:74]
[INFO 2021-07-03 18:13:51] ChannelMsg received: uid:1001  msg_data:"hello chat" [file:connector.go line:81]
[INFO 2021-07-03 18:13:51] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78]
[INFO 2021-07-03 18:14:25] stop the backend:backend_3001 [file:launch.go line:50]
[INFO 2021-07-03 18:14:25] stop the balancer:balancer_1001 [file:launch.go line:50]
[INFO 2021-07-03 18:39:51] init the backend:backend_3001 [file:launch.go line:38]
[INFO 2021-07-03 18:39:51] init the balancer:balancer_1001 [file:launch.go line:38]
[INFO 2021-07-03 18:40:05] login received: uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:connector.go line:27]
[INFO 2021-07-03 18:40:05] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78]
[INFO 2021-07-03 18:40:05] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x1429620] 0xc00053a600 5s 0xc0000b0450 server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388} uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:value.go line:476]
[INFO 2021-07-03 18:40:05] a is:36028797018963967 [file:connector.go line:74]
[INFO 2021-07-03 18:40:05] ChannelMsg received: uid:1001  msg_data:"hello chat" [file:connector.go line:81]
[INFO 2021-07-03 18:40:05] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78]
[INFO 2021-07-03 18:41:50] stop the backend:backend_3001 [file:launch.go line:50]
[INFO 2021-07-03 18:41:50] stop the balancer:balancer_1001 [file:launch.go line:50]
[INFO 2021-07-03 18:42:02] init the balancer:balancer_1001 [file:launch.go line:38]
[INFO 2021-07-03 18:42:02] init the backend:backend_3001 [file:launch.go line:38]
[INFO 2021-07-03 18:42:09] login received: uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:connector.go line:27]
[INFO 2021-07-03 18:42:09] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78]
[INFO 2021-07-03 18:42:09] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x1429620] 0xc0004cb800 5s 0xc000187370 server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388} uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:value.go line:476]
[INFO 2021-07-03 18:42:09] a is:36028797018963967 [file:connector.go line:74]
[INFO 2021-07-03 18:42:09] ChannelMsg received: uid:1001  msg_data:"hello chat" [file:connector.go line:81]
[INFO 2021-07-03 18:42:09] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78]
[INFO 2021-07-03 18:59:44] stop the balancer:balancer_1001 [file:launch.go line:50]
[INFO 2021-07-03 18:59:44] stop the backend:backend_3001 [file:launch.go line:50]
[INFO 2021-07-03 19:13:11] init the backend:backend_3001 [file:launch.go line:38]
[INFO 2021-07-03 19:13:11] init the balancer:balancer_1001 [file:launch.go line:38]
[INFO 2021-07-03 19:13:58] login received: uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:connector.go line:27]
[INFO 2021-07-03 19:13:58] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78]
[INFO 2021-07-03 19:13:58] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x1429620] 0xc000542600 5s 0xc0002960e0 server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388} uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:value.go line:476]
[INFO 2021-07-03 19:13:58] a is:36028797018963967 [file:connector.go line:74]
[INFO 2021-07-03 19:13:58] ChannelMsg received: uid:1001  msg_data:"hello chat" [file:connector.go line:81]
[INFO 2021-07-03 19:13:58] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78]
[INFO 2021-07-03 19:16:26] stop the backend:backend_3001 [file:launch.go line:50]
[INFO 2021-07-03 19:16:26] stop the balancer:balancer_1001 [file:launch.go line:50]
[INFO 2021-07-03 19:39:29] init the balancer:balancer_1001 [file:launch.go line:38]
[INFO 2021-07-03 19:39:29] discover Register server,k=>v,/server/balancer/balancer_1001=>{"server_id":"balancer_1001","server_type":"balancer","server_name":"kungfu balancer","server_ip":"127.0.0.1","client_port":8188} [file:etcd.go line:161]
[INFO 2021-07-03 19:39:29] EtcdDiscoverer register resp:&{Header:cluster_id:10316109323310759371 member_id:12530464223947363063 revision:279 raft_term:7  PrevKv:<nil> XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:165]
[INFO 2021-07-03 19:39:29] PUT "/server/balancer/balancer_1001" "{\"server_id\":\"balancer_1001\",\"server_type\":\"balancer\",\"server_name\":\"kungfu balancer\",\"server_ip\":\"127.0.0.1\",\"client_port\":8188}" [file:etcd.go line:104]
[INFO 2021-07-03 19:39:29] the server List is:map[balancer_1001:server_id:"balancer_1001" server_type:"balancer" server_name:"kungfu balancer" server_ip:"127.0.0.1" client_port:8188] [file:etcd.go line:151]
[INFO 2021-07-03 19:39:29] the server type map is:map[balancer:0xc0000321d0] [file:etcd.go line:152]
[WARN 2021-07-03 19:39:29] the proto is:&{Client:map[UserConnector.ChannelMsg:ChannelMsgRequest UserConnector.Login:LoginRequest] Server:map[UserConnector.ChannelMsg:ChannelMsgResponse UserConnector.Login:LoginResponse]} [file:protobuf.go line:26]
[INFO 2021-07-03 19:39:29] the protobuf is:{"code":200,"sys":{"heartbeat":10,"protos":{"client":{"UserConnector.ChannelMsg":"ChannelMsgRequest","UserConnector.Login":"LoginRequest"},"server":{"UserConnector.ChannelMsg":"ChannelMsgResponse","UserConnector.Login":"LoginResponse"}}}} [file:handler.go line:63]
[INFO 2021-07-03 19:39:29] DumpServices: [file:handler.go line:183]
[INFO 2021-07-03 19:39:29] registered service：UserConnector.ChannelMsg [file:handler.go line:183]
[INFO 2021-07-03 19:39:29] registered service：UserConnector.Login [file:handler.go line:183]
[INFO 2021-07-03 19:39:29] init the connector:connector_2001 [file:launch.go line:38]
[INFO 2021-07-03 19:39:29] discover Register server,k=>v,/server/connector/connector_2001=>{"server_id":"connector_2001","server_type":"connector","server_name":"kungfu connector","server_ip":"127.0.0.1","client_port":8288} [file:etcd.go line:161]
[INFO 2021-07-03 19:39:29] start worker pool:10， one pool size:1024 [file:handler.go line:207]
[INFO 2021-07-03 19:39:29] EtcdDiscoverer register resp:&{Header:cluster_id:10316109323310759371 member_id:15168875803774599630 revision:280 raft_term:7  PrevKv:<nil> XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:165]
[INFO 2021-07-03 19:39:29] PUT "/server/connector/connector_2001" "{\"server_id\":\"connector_2001\",\"server_type\":\"connector\",\"server_name\":\"kungfu connector\",\"server_ip\":\"127.0.0.1\",\"client_port\":8288}" [file:etcd.go line:104]
[INFO 2021-07-03 19:39:29] the server List is:map[balancer_1001:server_id:"balancer_1001" server_type:"balancer" server_name:"kungfu balancer" server_ip:"127.0.0.1" client_port:8188 connector_2001:server_id:"connector_2001" server_type:"connector" server_name:"kungfu connector" server_ip:"127.0.0.1" client_port:8288] [file:etcd.go line:151]
[INFO 2021-07-03 19:39:29] the server type map is:map[balancer:0xc0000321d0 connector:0xc000032230] [file:etcd.go line:152]
[INFO 2021-07-03 19:39:29] init the backend:backend_3001 [file:launch.go line:38]
[INFO 2021-07-03 19:39:29] discover Register server,k=>v,/server/backend/backend_3001=>{"server_id":"backend_3001","server_type":"backend","server_name":"kungfu backend","server_ip":"127.0.0.1","client_port":8388} [file:etcd.go line:161]
[INFO 2021-07-03 19:39:29] PUT "/server/backend/backend_3001" "{\"server_id\":\"backend_3001\",\"server_type\":\"backend\",\"server_name\":\"kungfu backend\",\"server_ip\":\"127.0.0.1\",\"client_port\":8388}" [file:etcd.go line:104]
[INFO 2021-07-03 19:39:29] the server List is:map[backend_3001:server_id:"backend_3001" server_type:"backend" server_name:"kungfu backend" server_ip:"127.0.0.1" client_port:8388 balancer_1001:server_id:"balancer_1001" server_type:"balancer" server_name:"kungfu balancer" server_ip:"127.0.0.1" client_port:8188 connector_2001:server_id:"connector_2001" server_type:"connector" server_name:"kungfu connector" server_ip:"127.0.0.1" client_port:8288] [file:etcd.go line:151]
[INFO 2021-07-03 19:39:29] the server type map is:map[backend:0xc000032500 balancer:0xc0000321d0 connector:0xc000032230] [file:etcd.go line:152]
[INFO 2021-07-03 19:39:29] EtcdDiscoverer register resp:&{Header:cluster_id:10316109323310759371 member_id:13634804518189357139 revision:281 raft_term:7  PrevKv:<nil> XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:165]
[INFO 2021-07-03 19:41:55] EtcdDiscoverer unregister resp:&{Header:cluster_id:10316109323310759371 member_id:12530464223947363063 revision:282 raft_term:7  Deleted:1 PrevKvs:[key:"/server/balancer/balancer_1001" create_revision:279 mod_revision:279 version:1 value:"{\"server_id\":\"balancer_1001\",\"server_type\":\"balancer\",\"server_name\":\"kungfu balancer\",\"server_ip\":\"127.0.0.1\",\"client_port\":8188}" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:177]
[INFO 2021-07-03 19:41:55] stop the balancer:balancer_1001 [file:launch.go line:50]
[INFO 2021-07-03 19:41:55] DELETE "/server/balancer/balancer_1001" "" [file:etcd.go line:104]
[INFO 2021-07-03 19:41:55] the server List is:map[backend_3001:server_id:"backend_3001" server_type:"backend" server_name:"kungfu backend" server_ip:"127.0.0.1" client_port:8388 connector_2001:server_id:"connector_2001" server_type:"connector" server_name:"kungfu connector" server_ip:"127.0.0.1" client_port:8288] [file:etcd.go line:151]
[INFO 2021-07-03 19:41:55] the server type map is:map[backend:0xc000032500 connector:0xc000032230] [file:etcd.go line:152]
[INFO 2021-07-03 19:41:55] EtcdDiscoverer unregister resp:&{Header:cluster_id:10316109323310759371 member_id:15168875803774599630 revision:283 raft_term:7  Deleted:1 PrevKvs:[key:"/server/connector/connector_2001" create_revision:280 mod_revision:280 version:1 value:"{\"server_id\":\"connector_2001\",\"server_type\":\"connector\",\"server_name\":\"kungfu connector\",\"server_ip\":\"127.0.0.1\",\"client_port\":8288}" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:177]
[INFO 2021-07-03 19:41:55] stop the connector:connector_2001 [file:launch.go line:50]
[INFO 2021-07-03 19:41:55] DELETE "/server/connector/connector_2001" "" [file:etcd.go line:104]
[INFO 2021-07-03 19:41:55] the server List is:map[backend_3001:server_id:"backend_3001" server_type:"backend" server_name:"kungfu backend" server_ip:"127.0.0.1" client_port:8388] [file:etcd.go line:151]
[INFO 2021-07-03 19:41:55] the server type map is:map[backend:0xc000032500] [file:etcd.go line:152]
[INFO 2021-07-03 19:41:55] DELETE "/server/backend/backend_3001" "" [file:etcd.go line:104]
[INFO 2021-07-03 19:41:55] the server List is:map[] [file:etcd.go line:151]
[INFO 2021-07-03 19:41:55] the server type map is:map[] [file:etcd.go line:152]
[WARN 2021-07-03 19:49:26] the proto is:&{Client:map[UserConnector.ChannelMsg:ChannelMsgRequest UserConnector.Login:LoginRequest] Server:map[UserConnector.ChannelMsg:ChannelMsgResponse UserConnector.Login:LoginResponse]} [file:protobuf.go line:26]
[INFO 2021-07-03 19:49:26] the protobuf is:{"code":200,"sys":{"heartbeat":10,"protos":{"client":{"UserConnector.ChannelMsg":"ChannelMsgRequest","UserConnector.Login":"LoginRequest"},"server":{"UserConnector.ChannelMsg":"ChannelMsgResponse","UserConnector.Login":"LoginResponse"}}}} [file:handler.go line:63]
[INFO 2021-07-03 19:49:26] DumpServices: [file:handler.go line:183]
[INFO 2021-07-03 19:49:26] registered service：UserConnector.ChannelMsg [file:handler.go line:183]
[INFO 2021-07-03 19:49:26] registered service：UserConnector.Login [file:handler.go line:183]
[INFO 2021-07-03 19:49:26] init the connector:connector_2001 [file:launch.go line:37]
[INFO 2021-07-03 19:49:26] discover Register server,k=>v,/server/connector/connector_2001=>{"server_id":"connector_2001","server_type":"connector","server_name":"kungfu connector","server_ip":"127.0.0.1","client_port":8288} [file:etcd.go line:161]
[INFO 2021-07-03 19:49:26] [START] Server name: kungfu connector,listenner at IP: 127.0.0.1, Port 8288 is starting
 [file:server.go line:83]
[INFO 2021-07-03 19:49:26] start worker pool:10， one pool size:1024 [file:handler.go line:207]
[INFO 2021-07-03 19:49:26] start tcpserver server  kungfu connector succ, now listenning... [file:server.go line:88]
[INFO 2021-07-03 19:49:26] PUT "/server/connector/connector_2001" "{\"server_id\":\"connector_2001\",\"server_type\":\"connector\",\"server_name\":\"kungfu connector\",\"server_ip\":\"127.0.0.1\",\"client_port\":8288}" [file:etcd.go line:104]
[INFO 2021-07-03 19:49:26] the server List is:map[connector_2001:server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288] [file:etcd.go line:151]
[INFO 2021-07-03 19:49:26] the server type map is:map[connector:0xc0001b02b0] [file:etcd.go line:152]
[INFO 2021-07-03 19:49:26] EtcdDiscoverer register resp:&{Header:cluster_id:10316109323310759371 member_id:13634804518189357139 revision:291 raft_term:7  PrevKv:<nil> XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:165]
[INFO 2021-07-03 19:49:26] init the backend:backend_3001 [file:launch.go line:37]
[INFO 2021-07-03 19:49:26] discover Register server,k=>v,/server/backend/backend_3001=>{"server_id":"backend_3001","server_type":"backend","server_name":"kungfu backend","server_ip":"127.0.0.1","client_port":8388} [file:etcd.go line:161]
[INFO 2021-07-03 19:49:26] PUT "/server/backend/backend_3001" "{\"server_id\":\"backend_3001\",\"server_type\":\"backend\",\"server_name\":\"kungfu backend\",\"server_ip\":\"127.0.0.1\",\"client_port\":8388}" [file:etcd.go line:104]
[INFO 2021-07-03 19:49:26] EtcdDiscoverer register resp:&{Header:cluster_id:10316109323310759371 member_id:12530464223947363063 revision:292 raft_term:7  PrevKv:<nil> XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:165]
[INFO 2021-07-03 19:49:26] the server List is:map[backend_3001:server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388 connector_2001:server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288] [file:etcd.go line:151]
[INFO 2021-07-03 19:49:26] the server type map is:map[backend:0xc000032a60 connector:0xc0001b02b0] [file:etcd.go line:152]
[INFO 2021-07-03 19:49:26] init the balancer:balancer_1001 [file:launch.go line:37]
[INFO 2021-07-03 19:49:26] discover Register server,k=>v,/server/balancer/balancer_1001=>{"server_id":"balancer_1001","server_type":"balancer","server_name":"kungfu balancer","server_ip":"127.0.0.1","client_port":8188} [file:etcd.go line:161]
[INFO 2021-07-03 19:49:26] PUT "/server/balancer/balancer_1001" "{\"server_id\":\"balancer_1001\",\"server_type\":\"balancer\",\"server_name\":\"kungfu balancer\",\"server_ip\":\"127.0.0.1\",\"client_port\":8188}" [file:etcd.go line:104]
[INFO 2021-07-03 19:49:26] the server List is:map[backend_3001:server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388 balancer_1001:server_id:"balancer_1001"  server_type:"balancer"  server_name:"kungfu balancer"  server_ip:"127.0.0.1"  client_port:8188 connector_2001:server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288] [file:etcd.go line:151]
[INFO 2021-07-03 19:49:26] the server type map is:map[backend:0xc000032a60 balancer:0xc00029aef0 connector:0xc0001b02b0] [file:etcd.go line:152]
[INFO 2021-07-03 19:49:26] EtcdDiscoverer register resp:&{Header:cluster_id:10316109323310759371 member_id:15168875803774599630 revision:293 raft_term:7  PrevKv:<nil> XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:165]
[INFO 2021-07-03 19:50:29] Get conn remote addr = 127.0.0.1:55413 [file:server.go line:88]
[INFO 2021-07-03 19:50:29] connection add to ConnManager successfully: conn num = 1 [file:agent.go line:99]
[INFO 2021-07-03 19:50:29] [Writer Goroutine is running] [file:asm_amd64.s line:1371]
[INFO 2021-07-03 19:50:29] login received: uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:connector.go line:27]
[INFO 2021-07-03 19:50:29] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:2 MsgData:[8 233 7 18 5 106 97 115 111 110 26 32 99 101 48 100 97 50 55 100 102 55 49 53 48 49 57 54 54 50 53 101 52 56 99 56 52 51 100 101 98 49 102 57 34 53 10 12 98 97 99 107 101 110 100 95 51 48 48 49 18 7 98 97 99 107 101 110 100 26 14 107 117 110 103 102 117 32 98 97 99 107 101 110 100 34 9 49 50 55 46 48 46 48 46 49 40 196 65 42 59 10 14 99 111 110 110 101 99 116 111 114 95 50 48 48 49 18 9 99 111 110 110 101 99 116 111 114 26 16 107 117 110 103 102 117 32 99 111 110 110 101 99 116 111 114 34 9 49 50 55 46 48 46 48 46 49 40 224 64]} [file:backend.go line:78]
[INFO 2021-07-03 19:50:29] BackendLogin:&{[nats:@kungfu2021@localhost:4222 nats:@kungfu2021@localhost:4223 nats:@kungfu2021@localhost:4224] [0x142c5a0] 0xc0003a6000 5s 0xc000150130 server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388} uid:1001  nickname:"jason"  token:"ce0da27df7150196625e48c843deb1f9"  backend:{server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388}  connector:{server_id:"connector_2001"  server_type:"connector"  server_name:"kungfu connector"  server_ip:"127.0.0.1"  client_port:8288} [file:value.go line:476]
[INFO 2021-07-03 19:50:29] a is:36028797018963967 [file:connector.go line:74]
[INFO 2021-07-03 19:50:29] ChannelMsg received: uid:1001  msg_data:"hello chat" [file:connector.go line:81]
[INFO 2021-07-03 19:50:29] MyBackend EventHandleSelf received: &{MsgType:0 MsgId:4 MsgData:[8 233 7 18 10 104 101 108 108 111 32 99 104 97 116]} [file:backend.go line:78]
[INFO 2021-07-03 19:52:13] DELETE "/server/connector/connector_2001" "" [file:etcd.go line:104]
[INFO 2021-07-03 19:52:13] the server List is:map[backend_3001:server_id:"backend_3001"  server_type:"backend"  server_name:"kungfu backend"  server_ip:"127.0.0.1"  client_port:8388 balancer_1001:server_id:"balancer_1001"  server_type:"balancer"  server_name:"kungfu balancer"  server_ip:"127.0.0.1"  client_port:8188] [file:etcd.go line:151]
[INFO 2021-07-03 19:52:13] the server type map is:map[backend:0xc000032a60 balancer:0xc00029aef0] [file:etcd.go line:152]
[INFO 2021-07-03 19:52:13] EtcdDiscoverer unregister resp:&{Header:cluster_id:10316109323310759371 member_id:13634804518189357139 revision:294 raft_term:7  Deleted:1 PrevKvs:[key:"/server/connector/connector_2001" create_revision:291 mod_revision:291 version:1 value:"{\"server_id\":\"connector_2001\",\"server_type\":\"connector\",\"server_name\":\"kungfu connector\",\"server_ip\":\"127.0.0.1\",\"client_port\":8288}" ] XXX_NoUnkeyedLiteral:{} XXX_unrecognized:[] XXX_sizecache:0} [file:etcd.go line:177]
[INFO 2021-07-03 19:52:13] [STOP] tcpserver server , name kungfu connector [file:tcp.go line:71]
[INFO 2021-07-03 19:52:13] received agent closed signal [file:asm_amd64.s line:1371]
[INFO 2021-07-03 19:52:13] 127.0.0.1:55413[conn Writer exit!] [file:agent.go line:175]
[INFO 2021-07-03 19:52:39] Read message error: EOF, session will be closed immediately [file:asm_amd64.s line:1371]
[ERROR 2021-07-03 19:52:39] close closed session [file:handler.go line:233]
